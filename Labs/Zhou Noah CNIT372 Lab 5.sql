/*
Noah Zhou
CNIT372 Lab Section 006
Estimated Time Spent: 3 hour
Late hours used: [0]
*/

/* Option 1 */

-- Question #1A
/* Q1A Query Results

Procedure PRINT_EMPLOYEE_ROSTER compiled

*/

-- Question #1B

EXECUTE print_employee_roster;

/* Q1B Query Results

100001         Manaugh                       Jim
100101         Rosner                        Joanne
100103         Bush                          Rita
100104         Abbott                        Michael
100106         Eckelman                      Paul
100112         Hickman                       Steven
100120         Nairn                         Michelle
100125         Stevenson                     Gabrielle
100127         Wendling                      Jason
100200         Zobitz                        Beth
100204         Keck                          David
100206         Xolo                          Kathleen
100209         Yates                         Tina
100220         Vigus                         Todd
100330         Gustavel                      Kristen
100365         Cheswick                      Sherman
100399         Day                           Ronald
100475         Hess                          Steve
100488         Osman                         Jamie
100550         Roland                        Allison
100559         Tyrie                         Meghan
100600         Zollman                       Calie
100650         Lilley                        Edna
100700         Jones                         Charles
100880         German                        Gary
100892         Platt                         Joseph
100944         Stahley                       Ryan
100967         Albregts                      Nicholas
100989         Deagen                        Kathryn
101007         Krasner                       Jason
101030         Moore                         Kristey
101045         Ortman                        Austin
101066         Rodgers                       Laura
101088         Underwood                     Patricha
101089         Alvarez                       Melissa
101097         Brose                         Jack
101115         Cochran                       Steve
101135         Deppe                         David
101154         Hettinger                     Gregory
101166         Reece                         Phil

100001         Manaugh                       Jim
100101         Rosner                        Joanne
100103         Bush                          Rita
100104         Abbott                        Michael
100106         Eckelman                      Paul
100112         Hickman                       Steven
100120         Nairn                         Michelle
100125         Stevenson                     Gabrielle
100127         Wendling                      Jason
100200         Zobitz                        Beth
100204         Keck                          David
100206         Xolo                          Kathleen
100209         Yates                         Tina
100220         Vigus                         Todd
100330         Gustavel                      Kristen
100365         Cheswick                      Sherman
100399         Day                           Ronald
100475         Hess                          Steve
100488         Osman                         Jamie
100550         Roland                        Allison
100559         Tyrie                         Meghan
100600         Zollman                       Calie
100650         Lilley                        Edna
100700         Jones                         Charles
100880         German                        Gary
100892         Platt                         Joseph
100944         Stahley                       Ryan
100967         Albregts                      Nicholas
100989         Deagen                        Kathryn
101007         Krasner                       Jason
101030         Moore                         Kristey
101045         Ortman                        Austin
101066         Rodgers                       Laura
101088         Underwood                     Patricha
101089         Alvarez                       Melissa
101097         Brose                         Jack
101115         Cochran                       Steve
101135         Deppe                         David
101154         Hettinger                     Gregory
101166         Reece                         Phil

*/

-- Question #2A
/* Q2A Query Results

Procedure PRINT_EMPLOYEE_ROSTER compiled

*/

-- Question #2B

EXECUTE print_employee_roster;

/* Q1D Query Results

100001         Manaugh                       Jim
100101         Rosner                        Joanne
100103         Bush                          Rita
100104         Abbott                        Michael
100106         Eckelman                      Paul
100112         Hickman                       Steven
100120         Nairn                         Michelle
100125         Stevenson                     Gabrielle
100127         Wendling                      Jason
100200         Zobitz                        Beth
100204         Keck                          David
100206         Xolo                          Kathleen
100209         Yates                         Tina
100220         Vigus                         Todd
100330         Gustavel                      Kristen
100365         Cheswick                      Sherman
100399         Day                           Ronald
100475         Hess                          Steve
100488         Osman                         Jamie
100550         Roland                        Allison
100559         Tyrie                         Meghan
100600         Zollman                       Calie
100650         Lilley                        Edna
100700         Jones                         Charles
100880         German                        Gary
100892         Platt                         Joseph
100944         Stahley                       Ryan
100967         Albregts                      Nicholas
100989         Deagen                        Kathryn
101007         Krasner                       Jason
101030         Moore                         Kristey
101045         Ortman                        Austin
101066         Rodgers                       Laura
101088         Underwood                     Patricha
101089         Alvarez                       Melissa
101097         Brose                         Jack
101115         Cochran                       Steve
101135         Deppe                         David
101154         Hettinger                     Gregory
101166         Reece                         Phil

*/

-- Question #2C
/* Q2C Non-Query Answer

The database object that the current_employee variable is based on is the
a row from the employee table that contains employeeid, lastname, and firstname.

*/

-- Question #3A
/* Q3A Query Results

Procedure PRINT_EMPLOYEE_ROSTER compiled

*/

-- Question #3B

EXECUTE print_employee_roster;

/* Q3B Query Results

100001         Manaugh, Jim
100101         Rosner, Joanne
100103         Bush, Rita
100104         Abbott, Michael
100106         Eckelman, Paul
100112         Hickman, Steven
100120         Nairn, Michelle
100125         Stevenson, Gabrielle
100127         Wendling, Jason
100200         Zobitz, Beth
100204         Keck, David
100206         Xolo, Kathleen
100209         Yates, Tina
100220         Vigus, Todd
100330         Gustavel, Kristen
100365         Cheswick, Sherman
100399         Day, Ronald
100475         Hess, Steve
100488         Osman, Jamie
100550         Roland, Allison
100559         Tyrie, Meghan
100600         Zollman, Calie
100650         Lilley, Edna
100700         Jones, Charles
100880         German, Gary
100892         Platt, Joseph
100944         Stahley, Ryan
100967         Albregts, Nicholas
100989         Deagen, Kathryn
101007         Krasner, Jason
101030         Moore, Kristey
101045         Ortman, Austin
101066         Rodgers, Laura
101088         Underwood, Patricha
101089         Alvarez, Melissa
101097         Brose, Jack
101115         Cochran, Steve
101135         Deppe, David
101154         Hettinger, Gregory
101166         Reece, Phil

*/

-- Question #4A
/* Q4A Query Results

Procedure PRINT_EMPLOYEE_ROSTER compiled

*/

-- Question #4B

EXECUTE print_employee_roster;

/* Q4B Query Results

100001         Manaugh, Jim
100101         Rosner, Joanne
100103         Bush, Rita
100104         Abbott, Michael
100106         Eckelman, Paul
100112         Hickman, Steven
100120         Nairn, Michelle
100125         Stevenson, Gabrielle
100127         Wendling, Jason
100200         Zobitz, Beth
100204         Keck, David
100206         Xolo, Kathleen
100209         Yates, Tina
100220         Vigus, Todd
100330         Gustavel, Kristen
100365         Cheswick, Sherman
100399         Day, Ronald
100475         Hess, Steve
100488         Osman, Jamie
100550         Roland, Allison
100559         Tyrie, Meghan
100600         Zollman, Calie
100650         Lilley, Edna
100700         Jones, Charles
100880         German, Gary
100892         Platt, Joseph
100944         Stahley, Ryan
100967         Albregts, Nicholas
100989         Deagen, Kathryn
101007         Krasner, Jason
101030         Moore, Kristey
101045         Ortman, Austin
101066         Rodgers, Laura
101088         Underwood, Patricha
101089         Alvarez, Melissa
101097         Brose, Jack
101115         Cochran, Steve
101135         Deppe, David
101154         Hettinger, Gregory
101166         Reece, Phil

*/

-- Question 4C
/* 4C Non-Query Answer

The processing steps associated with cursor usage are opening, fetching, and
closing.

*/

-- Question #5A
/* Q5A Query Results

Procedure PRINT_EMPLOYEE_ROSTER compiled

*/

-- Question #5B

EXECUTE print_employee_roster('Sales');

/* Q5B Query Results

100600         Zollman, Calie
101007         Krasner, Jason
101066         Rodgers, Laura


*/

-- Question #5C

EXECUTE print_employee_roster('Assembly');

/* Q5C Query Results

100101         Rosner, Joanne
100120         Nairn, Michelle
100204         Keck, David
100399         Day, Ronald
100475         Hess, Steve
100550         Roland, Allison
100892         Platt, Joseph
100967         Albregts, Nicholas
100989         Deagen, Kathryn
101030         Moore, Kristey
101045         Ortman, Austin
101088         Underwood, Patricha
101089         Alvarez, Melissa
101097         Brose, Jack
101115         Cochran, Steve
101135         Deppe, David
101154         Hettinger, Gregory
101166         Reece, Phil

*/

-- Question #5D
/* Q5D Non-Query Answer

If I provide a nonexistent job title such as 'Student', the procedure does
not display anything.

*/

-- Question #6A
/* Q6A Query Results

Procedure PRINT_EMPLOYEE_ROSTER compiled

*/

-- Question #6B

EXECUTE print_employee_roster('Assembly')

/* Q6B Query Results

100101         Rosner, Joanne
100120         Nairn, Michelle
100204         Keck, David
100399         Day, Ronald
100475         Hess, Steve
100550         Roland, Allison
100892         Platt, Joseph
100967         Albregts, Nicholas
100989         Deagen, Kathryn
101030         Moore, Kristey
101045         Ortman, Austin
101088         Underwood, Patricha
101089         Alvarez, Melissa
101097         Brose, Jack
101115         Cochran, Steve
101135         Deppe, David
101154         Hettinger, Gregory
101166         Reece, Phil

*/

-- Question #6C
/* Q6C Non-Query Answer

If an exception were to occur, an error message would be displayed to the user
where SQLCODE equals the unique error code and SQLERRM would return the error
message associated with the code

*/

-- Question #7A
/* Q7A Non-Query Answer

CREATE OR REPLACE PROCEDURE customer_roster
(p_state IN customer.state%type)
AS
    CURSOR all_customers
    IS
        SELECT NVL(companyname, ' ') AS companyname, city, state,
                custlastname||', '|| custfirstname as contactname
        FROM customer
        WHERE UPPER(TRIM(state)) = UPPER(TRIM(p_state));

    current_customer all_customers%ROWTYPE;
BEGIN
    OPEN all_customers;
    FETCH all_customers INTO current_customer;
    DBMS_OUTPUT.PUT_LINE(' ');
    WHILE all_customers%FOUND LOOP
        DBMS_OUTPUT.PUT (RPAD(current_customer.companyname, 30, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.city, 20, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.state, 10, ' '));
        DBMS_OUTPUT.PUT_LINE (current_customer.contactname);

        FETCH all_customers INTO current_customer;
    END LOOP;
    CLOSE all_customers;
EXCEPTION

    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT (SQLCODE);
        DBMS_OUTPUT.PUT (': ');
        DBMS_OUTPUT.PUT_LINE (SUBSTR(SQLERRM, 1, 100));

END customer_roster;

*/

-- Question #7B

EXECUTE customer_roster('GA');

/* Q7B Query Results

                              Macon               GA        Vanderhoff, Rosemary
                              Nahunta             GA        Malady, Frank
Family Medical Center         Adel                GA        Strong, Susan
Down Deep Drilling Inc.       Elberton            GA        Torres, Don
                              Swainsboro          GA        Osborne, Shirley
                              Athens              GA        Thompson, Jamie

*/

-- Question #8A
/* Q8A Non-Query Answer

CREATE OR REPLACE PROCEDURE customer_search
(p_name IN varchar2)
AS
    CURSOR all_customers
    IS
        SELECT NVL(companyname, ' ') AS companyname, custfirstname, custlastname, custtitle
        FROM customer
        WHERE UPPER(TRIM(custlastname)) LIKE '%' || UPPER(TRIM(p_name)) || '%';

    current_customer all_customers%ROWTYPE;
BEGIN
    OPEN all_customers;
    FETCH all_customers INTO current_customer;
    DBMS_OUTPUT.PUT_LINE(' ');
    WHILE all_customers%FOUND LOOP
        DBMS_OUTPUT.PUT (RPAD(current_customer.companyname, 30, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.custfirstname, 20, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.custlastname, 15, ' '));
        DBMS_OUTPUT.PUT_LINE (current_customer.custtitle);

        FETCH all_customers INTO current_customer;
    END LOOP;
    CLOSE all_customers;
EXCEPTION

    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT (SQLCODE);
        DBMS_OUTPUT.PUT (': ');
        DBMS_OUTPUT.PUT_LINE (SUBSTR(SQLERRM, 1, 100));

END customer_search;
*/

-- Question #8B

EXECUTE customer_search('NA');

/* Q8B Query Results

Bobs Repair Service           Daniel              Hundnall       Mr.
Automart                      Jessica             Nakamura       Ms.
                              Dorlan              Bresnaham      Dr.
                              Jay                 Hanau          Mr.
                              Matt                Nakanishi      Mr.
                              Jim                 Manaugh        Mr.


*/

-- Question #8C
/* Q8C Non-Query Answer

CREATE OR REPLACE PROCEDURE customer_search
(p_name IN varchar2)
AS
    CURSOR all_customers
    IS
        SELECT NVL(companyname, ' ') AS companyname, custfirstname, custlastname, custtitle
        FROM customer
        WHERE UPPER(TRIM(custfirstname)) LIKE '%' || UPPER(TRIM(p_name)) || '%' OR UPPER(TRIM(custlastname)) LIKE '%' || UPPER(TRIM(p_name)) || '%';

    current_customer all_customers%ROWTYPE;
BEGIN
    OPEN all_customers;
    FETCH all_customers INTO current_customer;
    DBMS_OUTPUT.PUT_LINE(' ');
    WHILE all_customers%FOUND LOOP
        DBMS_OUTPUT.PUT (RPAD(current_customer.companyname, 30, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.custfirstname, 20, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.custlastname, 15, ' '));
        DBMS_OUTPUT.PUT_LINE (current_customer.custtitle);

        FETCH all_customers INTO current_customer;
    END LOOP;
    CLOSE all_customers;
EXCEPTION

    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT (SQLCODE);
        DBMS_OUTPUT.PUT (': ');
        DBMS_OUTPUT.PUT_LINE (SUBSTR(SQLERRM, 1, 100));

END customer_search;

*/

-- Question #8D

EXECUTE customer_search('na');

/* Q8D Query Results

Bobs Repair Service           Daniel              Hundnall       Mr.
Automart                      Jessica             Nakamura       Ms.
                              Anna                Mayton         Dr.
                              Ronald              Miller         Mr.
                              Dorlan              Bresnaham      Dr.
                              Verna               McGrew         Ms.
                              Christina           Wilson         Mrs.
                              Jay                 Hanau          Mr.
                              Matt                Nakanishi      Mr.
                              Nancy               Basham         Mrs.
                              Jim                 Manaugh        Mr.
                              Jonathon            Blanco         Mr.

*/

-- Question #8E
/* Q8E Non-Query Answer

CREATE OR REPLACE PROCEDURE customer_search
(p_name IN varchar2)
AS
    CURSOR all_customers
    IS
        SELECT NVL(companyname, ' ') AS companyname, custfirstname, custlastname, custtitle
        FROM customer
        WHERE UPPER(TRIM(custfirstname)) LIKE '%' || UPPER(TRIM(p_name)) || '%' OR UPPER(TRIM(custlastname)) LIKE '%' || UPPER(TRIM(p_name)) || '%';

BEGIN
    DBMS_OUTPUT.PUT_LINE(' ');
    FOR current_customer IN all_customers LOOP
        DBMS_OUTPUT.PUT (RPAD(current_customer.companyname, 30, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.custfirstname, 20, ' '));
        DBMS_OUTPUT.PUT (RPAD(current_customer.custlastname, 15, ' '));
        DBMS_OUTPUT.PUT_LINE (current_customer.custtitle);
    END LOOP;

EXCEPTION

    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT (SQLCODE);
        DBMS_OUTPUT.PUT (': ');
        DBMS_OUTPUT.PUT_LINE (SUBSTR(SQLERRM, 1, 100));

END customer_search;

*/

-- Question #8F

EXECUTE customer_search('na');


/* Q8F Query Results

Bobs Repair Service           Daniel              Hundnall       Mr.
Automart                      Jessica             Nakamura       Ms.
                              Anna                Mayton         Dr.
                              Ronald              Miller         Mr.
                              Dorlan              Bresnaham      Dr.
                              Verna               McGrew         Ms.
                              Christina           Wilson         Mrs.
                              Jay                 Hanau          Mr.
                              Matt                Nakanishi      Mr.
                              Nancy               Basham         Mrs.
                              Jim                 Manaugh        Mr.
                              Jonathon            Blanco         Mr.


*/
